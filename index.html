<!DOCTYPE html>
<html>
<head>
    <title>IP Reputation Checker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; display: flex; justify-content: center; align-items: center; }
        .container { background: white; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); width: 100%; max-width: 800px; overflow: hidden; }
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; }
        .header h1 { font-size: 2.5rem; margin-bottom: 10px; }
        .header p { opacity: 0.9; font-size: 1.1rem; }
        .content { padding: 40px; }
        .input-section { display: flex; gap: 15px; margin-bottom: 30px; }
        input { flex: 1; padding: 18px 25px; border: 2px solid #e0e0e0; border-radius: 12px; font-size: 1.1rem; transition: all 0.3s; }
        input:focus { outline: none; border-color: #667eea; box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); }
        button { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 18px 35px; border-radius: 12px; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; }
        button:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3); }
        button:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }
        .result { margin-top: 30px; border-radius: 15px; padding: 30px; display: none; animation: fadeIn 0.5s; border: 1px solid #e0e0e0; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .clean { background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%); }
        .suspicious { background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%); }
        .malicious { background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%); }
        .result-header { display: flex; align-items: center; gap: 15px; margin-bottom: 25px; }
        .result-header h3 { font-size: 1.8rem; color: #333; }
        .emoji { font-size: 2.5rem; }
        .details-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 25px 0; }
        .detail-item { background: rgba(255, 255, 255, 0.9); padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        .detail-label { font-size: 0.9rem; color: #666; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
        .detail-value { font-size: 1.3rem; font-weight: 600; color: #333; }
        .verdict { text-align: center; padding: 25px; border-radius: 12px; margin-top: 30px; font-size: 1.5rem; font-weight: bold; color: white; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .loading { text-align: center; padding: 40px; color: #666; }
        .spinner { width: 50px; height: 50px; border: 5px solid #f3f3f3; border-top: 5px solid #667eea; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .error { background: #fee; color: #c00; padding: 20px; border-radius: 10px; margin-top: 20px; border-left: 5px solid #c00; }
        .footer { text-align: center; padding: 30px; color: #666; border-top: 1px solid #eee; background: #f8f9fa; }
        .footer a { color: #667eea; text-decoration: none; font-weight: 600; }
        .footer a:hover { text-decoration: underline; }
        @media (max-width: 600px) { .input-section { flex-direction: column; } .header h1 { font-size: 2rem; } .content { padding: 20px; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîç IP Reputation Checker</h1>
            <p>Check any IP address against AbuseIPDB threat intelligence database</p>
        </div>
        
        <div class="content">
            <div class="input-section">
                <input type="text" id="ipInput" placeholder="Enter IP address (e.g., 8.8.8.8 or 185.220.101.34)" onkeypress="if(event.key === 'Enter') checkIP()">
                <button id="checkButton" onclick="checkIP()">Check Reputation</button>
            </div>
            
            <div id="loading" class="loading" style="display: none;">
                <div class="spinner"></div>
                <p>Querying AbuseIPDB threat intelligence database...</p>
            </div>
            
            <div id="error" class="error" style="display: none;"></div>
            
            <div id="result" class="result"></div>
        </div>
        
        <div class="footer">
            <p>Built with ‚ù§Ô∏è by Asma | Cybersecurity Student</p>
            <p>Powered by <a href="https://www.abuseipdb.com/" target="_blank">AbuseIPDB</a> threat intelligence</p>
            <p>üîó <a href="https://github.com/Asma-cybersec/Ip-Reputation-Checker" target="_blank">View CLI version on GitHub</a></p>
        </div>
    </div>

    <script>
        const BACKEND_URL = 'https://ip-reputation-checker-j6iz.onrender.com';
        
        async function checkIP() {
            const ip = document.getElementById('ipInput').value.trim();
            const checkButton = document.getElementById('checkButton');
            const loading = document.getElementById('loading');
            const result = document.getElementById('result');
            const error = document.getElementById('error');
            
            result.style.display = 'none';
            error.style.display = 'none';
            
            if (!isValidIP(ip)) {
                showError('Please enter a valid IP address (e.g., 8.8.8.8)');
                return;
            }
            
            checkButton.disabled = true;
            loading.style.display = 'block';
            
            try {
                const response = await fetch(`${BACKEND_URL}/check?ip=${encodeURIComponent(ip)}`, {
                    method: 'GET',
                    headers: { 'Accept': 'application/json' }
                });
                
                const data = await response.json();
                
                if (!response.ok) {
                    throw new Error(data.error || 'API request failed');
                }
                
                displayResults(data);
                
            } catch (err) {
                showError(`Could not check IP: ${err.message}`);
            } finally {
                loading.style.display = 'none';
                checkButton.disabled = false;
            }
        }
        
        function isValidIP(ip) {
            const ipRegex = /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;
            return ipRegex.test(ip);
        }
        
        function displayResults(data) {
            const result = document.getElementById('result');
            
            // Determine threat level from backend response
            let threatLevel = 'clean';
            let emoji = '‚úÖ';
            
            if (data.threat && data.threat.includes('MALICIOUS')) {
                threatLevel = 'malicious';
                emoji = 'üö®';
            } else if (data.threat && data.threat.includes('SUSPICIOUS')) {
                threatLevel = 'suspicious';
                emoji = '‚ö†Ô∏è';
            }
            
            result.className = 'result ' + threatLevel;
            
            result.innerHTML = `
                <div class="result-header">
                    <span class="emoji">${emoji}</span>
                    <h3>Results for ${data.ip}</h3>
                </div>
                
                <div class="details-grid">
                    <div class="detail-item">
                        <div class="detail-label">Country</div>
                        <div class="detail-value">${data.country || 'Unknown'}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">ISP</div>
                        <div class="detail-value">${data.isp || 'Unknown'}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Threat Score</div>
                        <div class="detail-value">${data.score || 0}%</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Total Reports</div>
                        <div class="detail-value">${data.reports || 0}</div>
                    </div>
                </div>
                
                <div class="verdict">
                    ${emoji} ${threatLevel.toUpperCase()} THREAT
                </div>
            `;
            
            result.style.display = 'block';
        }
        
        function showError(message) {
            const error = document.getElementById('error');
            error.innerHTML = `<strong>Error:</strong> ${message}`;
            error.style.display = 'block';
        }
        
        // Add example buttons
        document.addEventListener('DOMContentLoaded', function() {
            const examples = ['8.8.8.8', '1.1.1.1', '185.220.101.34'];
            const examplesHTML = examples.map(ip => 
                `<button onclick="document.getElementById('ipInput').value='${ip}'; checkIP();" 
                        style="margin: 5px; padding: 8px 15px; background: #eef; border: 1px solid #ccd; border-radius: 5px; cursor: pointer;">
                 ${ip}
                </button>`
            ).join('');
            
            document.querySelector('.input-section').insertAdjacentHTML('afterend', 
                `<div style="margin: 15px 0; text-align: center; font-size: 0.9rem; color: #666;">
                    Try: ${examplesHTML}
                </div>`
            );
        });
    </script>
</body>
</html>
